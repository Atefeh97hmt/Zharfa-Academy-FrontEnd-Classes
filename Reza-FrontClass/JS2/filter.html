<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Filter</title>
</head>

<body>



    <style>
        body {
            background-color: #f5f5f5f5;
            margin: 0;
            padding: 20PX;
        }

        .grid {
            display: flex;
            gap: 10px;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
          
        }


        .card{
              background-color: #fff;
            padding: 7px 10px;
            border-radius: 10px;
        }
    </style>






    <header>
        <input id="search" placeholder="seraching name ...">
        <select id="countrySelect">
            <option value="all">all countries</option>
        </select>
    </header>

    <div id="cards" class="grid"></div>



    <script>

        var users = [];
        var searchInput = document.getElementById('search');
        var countrySelect = document.getElementById('countrySelect');
        var cardEl = document.getElementById('cards');

        function loadUsers() {
            fetch('https://randomuser.me/api/?results=25')
                .then(function (res) { return res.json(); })
                .then(function (data) {
                    users = data.results.map(function (u) {
                        return {
                            name: u.name.first + ' ' + u.name.last,
                            country: u.location.country,
                            email: u.email,
                            avatar: u.picture.medium
                        };
                    });
                    fillCountries();
                    render();
                });
        };


        function fillCountries() {
            var cs = users.map(function (u) { return u.country });
            cs = cs.filter(function (v, i, a) { return a.indexOf(v) === i });
            cs.sort();
            countrySelect.innerHTML = '<option value = "all">all countries </option>';
            cs.forEach(function (c) {
                var o = document.createElement('option');
                o.value = c;
                o.textContent = c;
                countrySelect.appendChild(o);
            })
        }

        function render() {
            var q = searchInput.value.toLowerCase();
            var country = countrySelect.value;
            var list = users.filter(function (u) {
                if (country !== 'all' && u.country !== country) return false;
                if (q && u.name.toLowerCase().indexOf(q) === -1) return false;
                return true;
            });

            cardEl.innerHTML = ""
            list.forEach(function (u) {
                var card = document.createElement('div'); card.classList = 'card'

                card.innerHTML =

                    ' <img class = "avatar" src= "' + u.avatar + '" >  ' + '<div>' + '<div class = "name" ' + u.name + '</div>' +
                    '<div class= "meta">' + u.country + '<br>' + u.email + '</div>' +
                    '</div>';
                cardEl.appendChild(card);
            });

            if (list.length === 0) {
                cardEl.innerHTML = "<div>  nothing founded !  </div>"
            }

        }


        searchInput.addEventListener('input', render);
        countrySelect.addEventListener('change', render);

        loadUsers()
    </script>



</body>

</html>